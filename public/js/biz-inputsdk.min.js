"use strict";!function(e){function a(e,r,a){var t,n,o,i;t=function(e){if("[object String]"===Object.prototype.toString.call(e)){if(/^http[s]?:\/\//i.test(e))return e.replace(/^http[s]?:/i,"");console.error("unvalid url: "+e)}return e}(e),n=function(e){var a;r((a=e,window.btoa([].slice.call(new window.Uint8Array(a)).map(function(e){return String.fromCharCode(e)}).join(""))))},o=function(){console.log("imageToBase64 failed!"),a()},i=void 0,(i=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null).open("GET",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(200===i.status||304===i.status?n&&n.call(null,i.response):o&&o.call(null,i.response))},i.send()}"undefined"!=typeof module&&(module.exports=a),e.imageToBase64=a}(window),function(o){o.SogouInput=o.SogouInput||{};var e,a,i,s,n="typeShareImage",c=0,l=2,u=3,h=4,r=(a=void 0===e?location.href.split("?")[1]||"":e,i={},a.replace(/([^?&=]+)=([^?&=]*)/g,function(e,a,r){var t=decodeURIComponent(a),n=decodeURIComponent(r);i[t]=n}),i).packageName||o.ANDROID_packageName||"com.tencent.mm",d={data:null},f={from:"",packageName:r};function g(){return/(SogouMSESDK)/i.test(navigator.userAgent)}function p(){return/(iPhone|iPod|iPad|IOS|SogouIMEIOS);?/i.test(navigator.userAgent)}function m(e,a){s&&s.call(null,e,a)}function I(e){var a=!1,r=c;for(var t in f)f.hasOwnProperty(t)&&(e[t]=f[t]);console.log(e);try{if(p())o.webkit.messageHandlers.grandSearchNotification.postMessage(e),a=!0;else if(g()){if(e.shareIconUrl){var n={};return n[e.shareIconUrl]=e.shareIconData,delete e.shareIconData,d.data=e,o.FLX_JsBridge.preloadImage(JSON.stringify(n))}o.FLX_JsBridge.jsCall(JSON.stringify(e)),a=!0}else a=!1,r=h,console.warn("仅支持ios和android")}catch(e){a=!1,r=u,console.error(e)}m(a,r)}function w(e,a,r){if(a=a||[],(e=e||[]).length!==a.length)return alert("参数urls的长度和keys的长度必须相同"),!1;!function a(r,t,n){if(1===r.length)o.imageToBase64(r[0],function(e){n[t[0]]=e,I(n)},function(){m(!1,l),console.error("ajax request for:"+r[0]+" is failed!")});else{var e=r.shift(0);o.imageToBase64(e,function(e){n[t.shift(0)]=e,a(r,t,n)},function(){m(!1,l),console.error("ajax request for:"+e+" is failed!")})}}(e,a,r)}o.jsCallback=function(e){"success"===e?(o.FLX_JsBridge.jsCall(JSON.stringify(d.data)),m(!0,c)):(console.error("image preload failed"),m(!1,l))};var t={shareWebUrl:function(e,a,r,t,n){var o={};return s=n,p()?w([t],["thumbImageData"],o={shareCate:0,title:e,description:a,shareURL:r,shareIconUrl:t}):g()?w([t],["shareIconData"],o={shareType:"typeShareDefault",shareUrl:r,shareTitle:e,shareDetail:a,shareIconUrl:t}):void I(o)},sharePic:function(e,a,r){var t={};return s=r,p()?w([e,a],["imageData","thumbImageData"],t={shareCate:1}):g()?w([e],["shareIconData"],t={shareType:n,shareIconUrl:e}):void I(t)},shareFace:function(e,a,r){var t={};return s=r,p()?w([e,a],["imageData","thumbImageData"],t={shareCate:2}):g()?w([e],["shareIconData"],t={shareType:n,shareIconUrl:e}):void I(t)},shareAudio:function(e,a,r,t,n,o){var i={};return s=o,p()?w([n],["thumbImageData"],i={shareCate:3,title:e,description:a,shareURL:r,dataURL:t}):g()?w([n],["shareIconData"],i={shareType:"typeShareMusic",shareTitle:e,shareDetail:a,shareUrl:r,shareIconUrl:n,shareDataUrl:t}):void I(i)},shareMiniProgram:function(e,a,r,t,n,o){var i={};return s=o,p()?w([t],["thumbImageData"],i={shareCate:4,title:e,description:a,shareURL:r,wmpShareInfo:n}):g()?w([t],["shareIconData"],i={shareType:"typeShareMiniProgram",shareTitle:e,shareDetail:a,shareUrl:r,shareIconUrl:t,shareMiniId:n.userName,shareMiniPath:n.path}):void I(i)},shareText:function(e,a){s=a,p()?I({shareCate:5,summary:e}):I({shareType:"typeCommit",shareDetail:e})},isInputEnv:function(){return!!(o.webkit&&o.webkit.messageHandlers&&o.webkit.messageHandlers.grandSearchNotification&&o.webkit.messageHandlers.grandSearchNotification.postMessage||o.FLX_JsBridge&&o.FLX_JsBridge.jsCall&&o.FLX_JsBridge.preloadImage)},init:function(e){for(var a in e=e||{})e.hasOwnProperty(a)&&(f[a]=e[a]);return f}};"undefined"!=typeof module&&(module.exports=t),o.SogouInput=t}(window);